{"version":3,"file":"admin.js","sources":["src/js/admin/admin.js"],"sourcesContent":["( function ( $ ) {\n    var gg_woo_bt_timeout = null;\n\n    var GG_Woo_BT_Admin = {\n        init: function () {\n            GG_Woo_BT_Admin.sortableInit();\n            GG_Woo_BT_Admin.searchProducts();\n            GG_Woo_BT_Admin.addResults();\n            GG_Woo_BT_Admin.dependencies();\n            GG_Woo_BT_Admin.removeProduct();\n            GG_Woo_BT_Admin.refreshIds();\n        },\n        sortableInit: function () {\n            var $ul = $( '#gg_woo_bt_selected ul' );\n            if ( $ul.length ) {\n                $ul.sortable( {\n                    cursor: 'move',\n                    stop: function ( event, ui ) {\n                        GG_Woo_BT_Admin.getIds();\n                    }\n                } ).disableSelection();\n            }\n        },\n        searchProducts: function () {\n            $( '#gg_woo_bt_search' ).keyup( function () {\n                var keyword = $( '#gg_woo_bt_search' ).val();\n                var $loading = $( '#gg_woo_bt_loading' ),\n                    $results = $( '#gg_woo_bt_results' );\n                if ( keyword !== '' ) {\n                    $loading.show();\n\n                    if ( gg_woo_bt_timeout != null ) {\n                        clearTimeout( gg_woo_bt_timeout );\n                    }\n\n                    gg_woo_bt_timeout = setTimeout( function () {\n                        gg_woo_bt_timeout = null;\n\n                        var data = {\n                            action: 'gg_woo_bt_get_search_results',\n                            keyword: keyword,\n                            id: $( '#gg_woo_bt_id' ).val(),\n                            ids: $( '#gg_woo_bt_ids' ).val(),\n                        };\n\n                        $.ajax( {\n                            url: ajaxurl,\n                            method: 'POST',\n                            data: data\n                        } ).done( function ( res ) {\n                            $results.show();\n                            $results.html( res );\n                            $loading.hide();\n                            GG_Woo_BT_Admin.addResults();\n                        } );\n                    }, 300 );\n\n                    return false;\n                } else {\n                    $results.hide();\n                }\n            } );\n        },\n        addResults: function () {\n            $( '#gg_woo_bt_results li' ).on( 'click', function () {\n                var $el = $( this );\n                var id = $( this ).data( 'id' );\n                $.ajax( {\n                    url: ajaxurl,\n                    method: 'POST',\n                    data: {\n                        action: 'gg_woo_bt_add_result_product_meta',\n                        id: id,\n                    }\n                } ).done( function (res) {\n                    if ( res ) {\n                        $el.remove();\n                        $( '#gg_woo_bt_selected ul' ).append( res );\n                        $( '#gg_woo_bt_results' ).hide();\n                        $( '#gg_woo_bt_results li' ).remove();\n                        $( '#gg_woo_bt_search' ).val( '' );\n\n                        GG_Woo_BT_Admin.reInitWCToolTip();\n                        GG_Woo_BT_Admin.sortableInit();\n                        GG_Woo_BT_Admin.removeProduct();\n                        GG_Woo_BT_Admin.getIds();\n                    }\n                } );\n            } );\n        },\n        reInitWCToolTip: function () {\n            $( '.tips, .help_tip, .woocommerce-help-tip' ).tipTip( {\n                'attribute': 'data-tip',\n                'fadeIn': 50,\n                'fadeOut': 50,\n                'delay': 200\n            } );\n        },\n        getIds: function () {\n            var ids = new Array();\n            var $ids = $( '#gg_woo_bt_ids' );\n\n            $( '#gg_woo_bt_selected li' ).each( function () {\n                if ( !$( this ).hasClass( 'gg_woo_bt_default' ) ) {\n                    ids.push( $( this ).attr( 'data-id' ) + '/' +\n                        $( this ).find( 'input.gg_woo_bt_price' ).val() + '/' +\n                        $( this ).find( 'input.gg_woo_bt_qty' ).val() );\n                }\n            } );\n\n            if ( ids.length ) {\n                $ids.val( ids.join( ',' ) );\n            } else {\n                $ids.val( '' );\n            }\n        },\n        refreshIds: function () {\n            $( '#gg_woo_bt_selected' ).on( 'keyup change click', 'input', function () {\n                GG_Woo_BT_Admin.getIds();\n\n                return false;\n            } );\n        },\n        dependencies: function () {\n            $( '#gg_woo_bt_custom_qty' ).on( 'click', function () {\n                if ( $( this ).is( ':checked' ) ) {\n                    $( '.gg_woo_bt_tr_show_if_custom_qty' ).show();\n                    $( '.gg_woo_bt_tr_hide_if_custom_qty' ).hide();\n                } else {\n                    $( '.gg_woo_bt_tr_show_if_custom_qty' ).hide();\n                    $( '.gg_woo_bt_tr_hide_if_custom_qty' ).show();\n                }\n            } );\n        },\n        removeProduct: function () {\n            $( '#gg_woo_bt_selected span.remove' ).on( 'click', function () {\n                $( this ).closest( 'li' ).remove();\n                GG_Woo_BT_Admin.getIds();\n\n                return false;\n            } );\n        },\n\n    };\n\n    $( GG_Woo_BT_Admin.init );\n\n} )( jQuery );\n"],"names":["$","gg_woo_bt_timeout","GG_Woo_BT_Admin","init","sortableInit","searchProducts","addResults","dependencies","removeProduct","refreshIds","$ul","length","sortable","cursor","stop","event","ui","getIds","disableSelection","keyup","keyword","val","$loading","$results","show","clearTimeout","setTimeout","data","action","id","ids","ajax","url","ajaxurl","method","done","res","html","hide","on","$el","remove","append","reInitWCToolTip","tipTip","Array","$ids","each","hasClass","push","attr","find","join","is","closest","jQuery"],"mappings":";;;IAAA,CAAE,UAAWA,CAAX,EAAe;IACb,MAAIC,iBAAiB,GAAG,IAAxB;IAEA,MAAIC,eAAe,GAAG;IAClBC,IAAAA,IAAI,EAAE,gBAAY;IACdD,MAAAA,eAAe,CAACE,YAAhB;IACAF,MAAAA,eAAe,CAACG,cAAhB;IACAH,MAAAA,eAAe,CAACI,UAAhB;IACAJ,MAAAA,eAAe,CAACK,YAAhB;IACAL,MAAAA,eAAe,CAACM,aAAhB;IACAN,MAAAA,eAAe,CAACO,UAAhB;IACH,KARiB;IASlBL,IAAAA,YAAY,EAAE,wBAAY;IACtB,UAAIM,GAAG,GAAGV,CAAC,CAAE,wBAAF,CAAX;;IACA,UAAKU,GAAG,CAACC,MAAT,EAAkB;IACdD,QAAAA,GAAG,CAACE,QAAJ,CAAc;IACVC,UAAAA,MAAM,EAAE,MADE;IAEVC,UAAAA,IAAI,EAAE,cAAWC,KAAX,EAAkBC,EAAlB,EAAuB;IACzBd,YAAAA,eAAe,CAACe,MAAhB;IACH;IAJS,SAAd,EAKIC,gBALJ;IAMH;IACJ,KAnBiB;IAoBlBb,IAAAA,cAAc,EAAE,0BAAY;IACxBL,MAAAA,CAAC,CAAE,mBAAF,CAAD,CAAyBmB,KAAzB,CAAgC,YAAY;IACxC,YAAIC,OAAO,GAAGpB,CAAC,CAAE,mBAAF,CAAD,CAAyBqB,GAAzB,EAAd;IACA,YAAIC,QAAQ,GAAGtB,CAAC,CAAE,oBAAF,CAAhB;IAAA,YACIuB,QAAQ,GAAGvB,CAAC,CAAE,oBAAF,CADhB;;IAEA,YAAKoB,OAAO,KAAK,EAAjB,EAAsB;IAClBE,UAAAA,QAAQ,CAACE,IAAT;;IAEA,cAAKvB,iBAAiB,IAAI,IAA1B,EAAiC;IAC7BwB,YAAAA,YAAY,CAAExB,iBAAF,CAAZ;IACH;;IAEDA,UAAAA,iBAAiB,GAAGyB,UAAU,CAAE,YAAY;IACxCzB,YAAAA,iBAAiB,GAAG,IAApB;IAEA,gBAAI0B,IAAI,GAAG;IACPC,cAAAA,MAAM,EAAE,8BADD;IAEPR,cAAAA,OAAO,EAAEA,OAFF;IAGPS,cAAAA,EAAE,EAAE7B,CAAC,CAAE,eAAF,CAAD,CAAqBqB,GAArB,EAHG;IAIPS,cAAAA,GAAG,EAAE9B,CAAC,CAAE,gBAAF,CAAD,CAAsBqB,GAAtB;IAJE,aAAX;IAOArB,YAAAA,CAAC,CAAC+B,IAAF,CAAQ;IACJC,cAAAA,GAAG,EAAEC,OADD;IAEJC,cAAAA,MAAM,EAAE,MAFJ;IAGJP,cAAAA,IAAI,EAAEA;IAHF,aAAR,EAIIQ,IAJJ,CAIU,UAAWC,GAAX,EAAiB;IACvBb,cAAAA,QAAQ,CAACC,IAAT;IACAD,cAAAA,QAAQ,CAACc,IAAT,CAAeD,GAAf;IACAd,cAAAA,QAAQ,CAACgB,IAAT;IACApC,cAAAA,eAAe,CAACI,UAAhB;IACH,aATD;IAUH,WApB6B,EAoB3B,GApB2B,CAA9B;IAsBA,iBAAO,KAAP;IACH,SA9BD,MA8BO;IACHiB,UAAAA,QAAQ,CAACe,IAAT;IACH;IACJ,OArCD;IAsCH,KA3DiB;IA4DlBhC,IAAAA,UAAU,EAAE,sBAAY;IACpBN,MAAAA,CAAC,CAAE,uBAAF,CAAD,CAA6BuC,EAA7B,CAAiC,OAAjC,EAA0C,YAAY;IAClD,YAAIC,GAAG,GAAGxC,CAAC,CAAE,IAAF,CAAX;IACA,YAAI6B,EAAE,GAAG7B,CAAC,CAAE,IAAF,CAAD,CAAU2B,IAAV,CAAgB,IAAhB,CAAT;IACA3B,QAAAA,CAAC,CAAC+B,IAAF,CAAQ;IACJC,UAAAA,GAAG,EAAEC,OADD;IAEJC,UAAAA,MAAM,EAAE,MAFJ;IAGJP,UAAAA,IAAI,EAAE;IACFC,YAAAA,MAAM,EAAE,mCADN;IAEFC,YAAAA,EAAE,EAAEA;IAFF;IAHF,SAAR,EAOIM,IAPJ,CAOU,UAAUC,GAAV,EAAe;IACrB,cAAKA,GAAL,EAAW;IACPI,YAAAA,GAAG,CAACC,MAAJ;IACAzC,YAAAA,CAAC,CAAE,wBAAF,CAAD,CAA8B0C,MAA9B,CAAsCN,GAAtC;IACApC,YAAAA,CAAC,CAAE,oBAAF,CAAD,CAA0BsC,IAA1B;IACAtC,YAAAA,CAAC,CAAE,uBAAF,CAAD,CAA6ByC,MAA7B;IACAzC,YAAAA,CAAC,CAAE,mBAAF,CAAD,CAAyBqB,GAAzB,CAA8B,EAA9B;IAEAnB,YAAAA,eAAe,CAACyC,eAAhB;IACAzC,YAAAA,eAAe,CAACE,YAAhB;IACAF,YAAAA,eAAe,CAACM,aAAhB;IACAN,YAAAA,eAAe,CAACe,MAAhB;IACH;IACJ,SApBD;IAqBH,OAxBD;IAyBH,KAtFiB;IAuFlB0B,IAAAA,eAAe,EAAE,2BAAY;IACzB3C,MAAAA,CAAC,CAAE,yCAAF,CAAD,CAA+C4C,MAA/C,CAAuD;IACnD,qBAAa,UADsC;IAEnD,kBAAU,EAFyC;IAGnD,mBAAW,EAHwC;IAInD,iBAAS;IAJ0C,OAAvD;IAMH,KA9FiB;IA+FlB3B,IAAAA,MAAM,EAAE,kBAAY;IAChB,UAAIa,GAAG,GAAG,IAAIe,KAAJ,EAAV;IACA,UAAIC,IAAI,GAAG9C,CAAC,CAAE,gBAAF,CAAZ;IAEAA,MAAAA,CAAC,CAAE,wBAAF,CAAD,CAA8B+C,IAA9B,CAAoC,YAAY;IAC5C,YAAK,CAAC/C,CAAC,CAAE,IAAF,CAAD,CAAUgD,QAAV,CAAoB,mBAApB,CAAN,EAAkD;IAC9ClB,UAAAA,GAAG,CAACmB,IAAJ,CAAUjD,CAAC,CAAE,IAAF,CAAD,CAAUkD,IAAV,CAAgB,SAAhB,IAA8B,GAA9B,GACNlD,CAAC,CAAE,IAAF,CAAD,CAAUmD,IAAV,CAAgB,uBAAhB,EAA0C9B,GAA1C,EADM,GAC4C,GAD5C,GAENrB,CAAC,CAAE,IAAF,CAAD,CAAUmD,IAAV,CAAgB,qBAAhB,EAAwC9B,GAAxC,EAFJ;IAGH;IACJ,OAND;;IAQA,UAAKS,GAAG,CAACnB,MAAT,EAAkB;IACdmC,QAAAA,IAAI,CAACzB,GAAL,CAAUS,GAAG,CAACsB,IAAJ,CAAU,GAAV,CAAV;IACH,OAFD,MAEO;IACHN,QAAAA,IAAI,CAACzB,GAAL,CAAU,EAAV;IACH;IACJ,KAhHiB;IAiHlBZ,IAAAA,UAAU,EAAE,sBAAY;IACpBT,MAAAA,CAAC,CAAE,qBAAF,CAAD,CAA2BuC,EAA3B,CAA+B,oBAA/B,EAAqD,OAArD,EAA8D,YAAY;IACtErC,QAAAA,eAAe,CAACe,MAAhB;IAEA,eAAO,KAAP;IACH,OAJD;IAKH,KAvHiB;IAwHlBV,IAAAA,YAAY,EAAE,wBAAY;IACtBP,MAAAA,CAAC,CAAE,uBAAF,CAAD,CAA6BuC,EAA7B,CAAiC,OAAjC,EAA0C,YAAY;IAClD,YAAKvC,CAAC,CAAE,IAAF,CAAD,CAAUqD,EAAV,CAAc,UAAd,CAAL,EAAkC;IAC9BrD,UAAAA,CAAC,CAAE,kCAAF,CAAD,CAAwCwB,IAAxC;IACAxB,UAAAA,CAAC,CAAE,kCAAF,CAAD,CAAwCsC,IAAxC;IACH,SAHD,MAGO;IACHtC,UAAAA,CAAC,CAAE,kCAAF,CAAD,CAAwCsC,IAAxC;IACAtC,UAAAA,CAAC,CAAE,kCAAF,CAAD,CAAwCwB,IAAxC;IACH;IACJ,OARD;IASH,KAlIiB;IAmIlBhB,IAAAA,aAAa,EAAE,yBAAY;IACvBR,MAAAA,CAAC,CAAE,iCAAF,CAAD,CAAuCuC,EAAvC,CAA2C,OAA3C,EAAoD,YAAY;IAC5DvC,QAAAA,CAAC,CAAE,IAAF,CAAD,CAAUsD,OAAV,CAAmB,IAAnB,EAA0Bb,MAA1B;IACAvC,QAAAA,eAAe,CAACe,MAAhB;IAEA,eAAO,KAAP;IACH,OALD;IAMH;IA1IiB,GAAtB;IA8IAjB,EAAAA,CAAC,CAAEE,eAAe,CAACC,IAAlB,CAAD;IAEH,CAnJD,EAmJKoD,MAnJL;;;;"}