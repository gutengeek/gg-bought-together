{"version":3,"file":"gg-woo-bt.js","sources":["src/js/gg-woo-bt.js"],"sourcesContent":["( function ( $ ) {\n    var GG_Woo_BT = {\n        init: function () {\n            GG_Woo_BT.run();\n            GG_Woo_BT.access();\n            GG_Woo_BT.changeQty();\n            GG_Woo_BT.hookFoundVariation();\n            GG_Woo_BT.hookResetData();\n        },\n        run: function () {\n            $( document ).ready( function ( $ ) {\n                var $wraper = $( '.gg_woo_bt-wrap' );\n                if ( !$wraper.length ) {\n                    return;\n                }\n\n                $wraper.each( function () {\n                    GG_Woo_BT.prepareData( $( this ) );\n                } );\n            } );\n        },\n        access: function () {\n            $( document ).on( 'click touch', '.single_add_to_cart_button', function ( e ) {\n                if ( $( this ).hasClass( 'gg_woo_bt-disabled' ) ) {\n                    e.preventDefault();\n                }\n            } );\n\n            $( document ).on( 'change', '.gg_woo_bt-checkbox', function () {\n                var $wrap = $( this ).closest( '.gg_woo_bt-wrap' );\n                GG_Woo_BT.prepareData( $wrap );\n            } );\n\n            $( document ).on( 'change keyup mouseup', '.gg_woo_bt-main-qty', function () {\n                var value = $( this ).val();\n\n                $( this ).closest( '.gg_woo_bt-product-main' ).attr( 'data-qty', value );\n                $( this ).closest( '.summary' ).find( 'form.cart .quantity .qty' ).val( value ).trigger( 'change' );\n            } );\n\n            $( document ).on( 'change keyup mouseup', '.gg_woo_bt-qty', function () {\n                var $el = $( this );\n                var $wraper = $el.closest( '.gg_woo_bt-wrap' );\n                var $product = $el.closest( '.gg_woo_bt-product' );\n                var $checkbox = $product.find( '.gg_woo_bt-checkbox' );\n                var value = parseFloat( $el.val() );\n\n                if ( $checkbox.prop( 'checked' ) ) {\n                    var min_val = parseFloat( $el.attr( 'min' ) );\n                    var max_val = parseFloat( $el.attr( 'max' ) );\n\n                    if ( value < min_val ) {\n                        $el.val( min_val );\n                    }\n\n                    if ( value > max_val ) {\n                        $el.val( max_val );\n                    }\n\n                    $product.attr( 'data-qty', $el.val() );\n\n                    GG_Woo_BT.prepareData( $wraper );\n                }\n            } );\n        },\n        prepareData: function ( $wrap ) {\n            var wrap_id = $wrap.attr( 'data-id' );\n\n            if ( wrap_id !== undefined && parseInt( wrap_id ) > 0 ) {\n                var container = GG_Woo_BT.getContainer( wrap_id );\n                var $container = $wrap.closest( container );\n\n                GG_Woo_BT.isReady( $container );\n                GG_Woo_BT.calcPrice( $container );\n                GG_Woo_BT.saveIds( $container );\n\n                if ( gg_woo_bt_params.counter !== 'hide' ) {\n                    GG_Woo_BT.updateCount( $container );\n                }\n            }\n        },\n        hookFoundVariation: function () {\n            $( document ).on( 'found_variation', function ( e, t ) {\n                var $wrap = $( e[ 'target' ] ).closest( '.gg_woo_bt-wrap' );\n                var $products = $( e[ 'target' ] ).closest( '.gg_woo_bt-products' );\n                var $product = $( e[ 'target' ] ).closest( '.gg_woo_bt-product' );\n\n                if ( $product.length ) {\n                    var new_price = $product.attr( 'data-new-price' );\n\n                    if ( isNaN( new_price ) ) {\n                        new_price = t[ 'display_price' ] * parseFloat( new_price ) / 100;\n                    }\n\n                    $product.find( '.gg_woo_bt-price-ori' ).hide();\n                    $product.find( '.gg_woo_bt-price-new' )\n                            .html( GG_Woo_BT.priceHtml( t[ 'display_price' ], new_price ) )\n                            .show();\n\n                    if ( t[ 'is_purchasable' ] && t[ 'is_in_stock' ] ) {\n                        $product.attr( 'data-id', t[ 'variation_id' ] );\n                        $product.attr( 'data-price', t[ 'display_price' ] );\n                    } else {\n                        $product.attr( 'data-id', 0 );\n                    }\n\n                    if ( t[ 'availability_html' ] && t[ 'availability_html' ] !== '' ) {\n                        $product.find( '.gg_woo_bt-availability' ).html( t[ 'availability_html' ] ).show();\n                    } else {\n                        $product.find( '.gg_woo_bt-availability' ).html( '' ).hide();\n                    }\n\n                    if ( t[ 'image' ][ 'url' ] && t[ 'image' ][ 'srcset' ] ) {\n                        $product.find( '.gg_woo_bt-thumb-ori' ).hide();\n                        $product.find( '.gg_woo_bt-thumb-new' )\n                                .html( '<img src=\"' + t[ 'image' ][ 'url' ] + '\" srcset=\"' +\n                                    t[ 'image' ][ 'srcset' ] + '\"/>' )\n                                .show();\n                    }\n\n                    $( '.product_meta .sku' ).text( $products.attr( 'data-product-sku' ) );\n\n                    $( e[ 'target' ] ).closest( '.variations_form' ).trigger( 'reset_image' );\n                } else {\n                    $wrap = $( e[ 'target' ] ).closest( '.summary' ).find( '.gg_woo_bt-wrap' );\n                    $products = $( e[ 'target' ] ).closest( '.summary' ).find( '.gg_woo_bt-products' );\n                    $products.attr( 'data-product-id', t[ 'variation_id' ] );\n                    $products.attr( 'data-product-sku', t[ 'sku' ] );\n                    $products.attr( 'data-product-price', t[ 'display_price' ] );\n                }\n\n                GG_Woo_BT.prepareData( $wrap );\n            } );\n        },\n        hookResetData: function () {\n            $( document ).on( 'reset_data', function ( e ) {\n                var $wrap = $( e[ 'target' ] ).closest( '.gg_woo_bt-wrap' );\n                var $products = $( e[ 'target' ] ).closest( '.gg_woo_bt-products' );\n                var $product = $( e[ 'target' ] ).closest( '.gg_woo_bt-product' );\n\n                if ( $product.length ) {\n                    $product.attr( 'data-id', 0 );\n                    $( e[ 'target' ] ).closest( '.variations_form' ).find( 'p.stock' ).remove();\n                    $( '.product_meta .sku' ).text( $products.attr( 'data-product-sku' ) );\n                    $product.find( '.gg_woo_bt-availability' ).html( '' ).hide();\n                    $product.find( '.gg_woo_bt-thumb-new' ).hide();\n                    $product.find( '.gg_woo_bt-thumb-ori' ).show();\n                    $product.find( '.gg_woo_bt-price-new' ).hide();\n                    $product.find( '.gg_woo_bt-price-ori' ).show();\n                } else {\n                    $wrap = $( e[ 'target' ] ).closest( '.summary' ).find( '.gg_woo_bt-wrap' );\n                    $products = $( e[ 'target' ] ).closest( '.summary' ).find( '.gg_woo_bt-products' );\n                    $products.attr( 'data-product-id', 0 );\n                    $products.attr( 'data-product-price', 0 );\n                    $products.attr( 'data-product-sku', $products.attr( 'data-product-o-sku' ) );\n                }\n\n                GG_Woo_BT.prepareData( $wrap );\n            } );\n        },\n        getContainer: function ( id ) {\n            var $wrap_el = $( '.gg_woo_bt-wrap-' + id );\n            if ( $wrap_el.closest( '#product-' + id ).length ) {\n                return '#product-' + id;\n            }\n\n            if ( $wrap_el.closest( '.product.post-' + id ).length ) {\n                return '.product.post-' + id;\n            }\n\n            if ( $wrap_el.closest( 'div.product' ).length ) {\n                return 'div.product';\n            }\n\n            return 'body.single-product';\n        },\n        isReady: function ( $wrap ) {\n            var $products = $wrap.find( '.gg_woo_bt-products' );\n            var $notice = $wrap.find( '.gg_woo_bt-notice' );\n            var $ids = $wrap.find( '.gg_woo_bt-ids' );\n            var $btn = $wrap.find( '.single_add_to_cart_button' );\n            var is_selection = false;\n            var selection_name = '';\n            var optional = $products.attr( 'data-optional' );\n\n            if ( ( optional === 'on' ) && ( $products.find( '.gg_woo_bt-product-main' ).length > 0 ) ) {\n                $( 'form.cart > .quantity' ).hide();\n                $( 'form.cart .woocommerce-variation-add-to-cart > .quantity' ).hide();\n            }\n\n            if ( ( gg_woo_bt_params.position === 'before_add_to_cart' ) &&\n                ( $products.attr( 'data-product-type' ) === 'variable' ) &&\n                ( $products.attr( 'data-variables' ) === 'no' ) ) {\n                $products.closest( '.gg_woo_bt-wrap' ).insertAfter( $ids );\n                $products.find( '.gg_woo_bt-qty' ).removeClass( 'qty' );\n            }\n\n            $products.find( '.gg_woo_bt-product-together' ).each( function () {\n                var $el = $( this );\n                var is_checked = $el.find( '.gg_woo_bt-checkbox' ).prop( 'checked' );\n                var val_id = parseInt( $el.attr( 'data-id' ) );\n\n                if ( !is_checked ) {\n                    $el.addClass( 'gg_woo_bt-unchecked' );\n\n                    if ( !$el.hasClass( 'show-variation-select' ) ) {\n                        $el.find( '.variations_form' ).hide();\n                    }\n                } else {\n                    $el.removeClass( 'gg_woo_bt-unchecked' );\n                    if ( !$el.hasClass( 'show-variation-select' ) ) {\n                        $el.find( '.variations_form' ).show();\n                    }\n                }\n\n                if ( is_checked && ( val_id == 0 ) ) {\n                    is_selection = true;\n\n                    if ( selection_name === '' ) {\n                        selection_name = $el.attr( 'data-name' );\n                    }\n                }\n            } );\n\n            if ( is_selection ) {\n                $btn.addClass( 'gg_woo_bt-disabled gg_woo_bt-selection' );\n                $notice.html(\n                    gg_woo_bt_params.text.variation_notice.replace( '%s', '<strong>' + selection_name + '</strong>' ) )\n                       .slideDown();\n            } else {\n                $btn.removeClass( 'gg_woo_bt-disabled gg_woo_bt-selection' );\n                $notice.html( '' ).slideUp();\n            }\n        },\n        changeQty: function () {\n            $( document ).on( 'change', 'form.cart .qty', function () {\n                var $el = $( this );\n                var qty = parseFloat( $el.val() );\n\n                if ( $el.hasClass( 'gg_woo_bt-qty' ) ) {\n                    return;\n                }\n\n                if ( !$el.closest( 'form.cart' ).find( '.gg_woo_bt-ids' ).length ) {\n                    return;\n                }\n\n                var wrap_id = $el.closest( 'form.cart' ).find( '.gg_woo_bt-ids' ).attr( 'data-id' );\n                var $wrap = $( '.gg_woo_bt-wrap-' + wrap_id );\n                var $products = $wrap.find( '.gg_woo_bt-products' );\n                var optional = $products.attr( 'data-optional' );\n                var sync_qty = $products.attr( 'data-sync-qty' );\n\n                $products.find( '.gg_woo_bt-product-main' ).attr( 'data-qty', qty );\n\n                if ( ( optional !== 'on' ) && ( sync_qty === 'on' ) ) {\n                    $products.find( '.gg_woo_bt-product-together' ).each( function () {\n                        var _qty = parseFloat( $( this ).attr( 'data-qty-ori' ) ) * qty;\n\n                        $( this ).attr( 'data-qty', _qty );\n                        $( this ).find( '.gg_woo_bt-qty-num .gg_woo_bt-qty' ).html( _qty );\n                    } );\n                }\n\n                GG_Woo_BT.prepareData( $wrap );\n            } );\n        },\n        calcPrice: function ( $wrap ) {\n            var $products = $wrap.find( '.gg_woo_bt-products' );\n            var $product_this = $products.find( '.gg_woo_bt-product-main' );\n            var $total = $wrap.find( '.gg_woo_bt-total' );\n            var $btn = $wrap.find( '.single_add_to_cart_button' );\n            var count = 0, total = 0;\n            var total_html = '';\n            var discount = parseFloat( $products.attr( 'data-discount' ) );\n            var ori_price = parseFloat( $products.attr( 'data-product-price' ) );\n            var ori_price_suffix = $products.attr( 'data-product-price-suffix' );\n            var ori_qty = parseFloat( $btn.closest( 'form.cart' ).find( 'input.qty' ).val() );\n            var total_ori = ori_price * ori_qty;\n            var main_price_selector = gg_woo_bt_params.main_price_selector;\n            var show_price = $products.attr( 'data-show-price' );\n            var fix = Math.pow( 10, Number( gg_woo_bt_params.price_decimals ) + 1 );\n\n            $products.find( '.gg_woo_bt-product-together' ).each( function () {\n                var $el = $( this );\n                var _checked = $el.find( '.gg_woo_bt-checkbox' ).prop( 'checked' );\n                var _id = parseInt( $el.attr( 'data-id' ) );\n                var _qty = parseFloat( $el.attr( 'data-qty' ) );\n                var _price = $el.attr( 'data-new-price' );\n                var _price_suffix = $el.attr( 'data-price-suffix' );\n                var origin_price = $el.attr( 'data-price' );\n                var regular_price = $el.attr( 'data-regular-price' );\n                var origin_total = 0, _total = 0;\n\n                if ( ( _qty > 0 ) && ( _id > 0 ) ) {\n                    origin_total = _qty * origin_price;\n\n                    if ( isNaN( _price ) ) {\n                        if ( _price == '100%' ) {\n                            origin_total = _qty * regular_price;\n                            _total = _qty * origin_price;\n                        } else {\n                            _total = origin_total * parseFloat( _price ) / 100;\n                        }\n                    } else {\n                        _total = _qty * _price;\n                    }\n\n                    if ( show_price === 'total' ) {\n                        $el.find( '.gg_woo_bt-price-ori' ).hide();\n                        $el.find( '.gg_woo_bt-price-new' )\n                           .html( GG_Woo_BT.priceHtml( origin_total, _total ) + _price_suffix )\n                           .show();\n                    }\n\n                    if ( _checked ) {\n                        count++;\n                        total += _total;\n                    }\n                }\n            } );\n\n            total = Math.round( total * fix ) / fix;\n\n            if ( $product_this.length ) {\n                var _qty = parseFloat( $product_this.attr( 'data-qty' ) );\n                var _price_suffix = $product_this.attr( 'data-price-suffix' );\n\n                if ( total > 0 ) {\n                    var _price = $product_this.attr( 'data-new-price' );\n                    var origin_price = $product_this.attr( 'data-price' );\n                    var origin_total = _qty * origin_price,\n                        _total = _qty * _price;\n\n                    $product_this.find( '.gg_woo_bt-price-ori' ).hide();\n                    $product_this.find( '.gg_woo_bt-price-new' )\n                                 .html( GG_Woo_BT.priceHtml( origin_total, _total ) + _price_suffix )\n                                 .show();\n                } else {\n                    var _price = $product_this.attr( 'data-price' );\n                    var regular_price = $product_this.attr( 'data-regular-price' );\n                    var origin_total = _qty * regular_price,\n                        _total = _qty * _price;\n\n                    $product_this.find( '.gg_woo_bt-price-ori' ).hide();\n                    $product_this.find( '.gg_woo_bt-price-new' )\n                                 .html( GG_Woo_BT.priceHtml( origin_total, _total ) + _price_suffix )\n                                 .show();\n                }\n            }\n\n            if ( count > 0 ) {\n                total_html = GG_Woo_BT.formatPrice( total );\n                $total.html(\n                    gg_woo_bt_params.text.additional_price + ' ' + total_html + ori_price_suffix ).slideDown();\n\n                if ( isNaN( discount ) ) {\n                    discount = 0;\n                }\n\n                total_ori = total_ori * ( 100 - discount ) / 100 + total;\n            } else {\n                $total.html( '' ).slideUp();\n            }\n\n            if ( gg_woo_bt_params.recal_price !== 'off' ) {\n                if ( parseInt( $products.attr( 'data-product-id' ) ) > 0 ) {\n                    $( main_price_selector ).html( GG_Woo_BT.formatPrice( total_ori ) + ori_price_suffix );\n                } else {\n                    $( main_price_selector ).html( $products.attr( 'data-product-price-html' ) );\n                }\n            }\n\n            $( document ).trigger( 'calcPrice', [ total, total_html ] );\n\n            $wrap.find( '.gg_woo_bt-wrap' ).attr( 'data-total', total );\n        },\n        saveIds: function ( $wrap ) {\n            var $products = $wrap.find( '.gg_woo_bt-products' );\n            var $ids = $wrap.find( '.gg_woo_bt-ids' );\n            var items = [];\n\n            $products.find( '.gg_woo_bt-product-together' ).each( function () {\n                var $el = $( this );\n                var _checked = $el.find( '.gg_woo_bt-checkbox' ).prop( 'checked' );\n                var _id = parseInt( $el.attr( 'data-id' ) );\n                var _qty = parseFloat( $el.attr( 'data-qty' ) );\n                var _price = $el.attr( 'data-new-price' );\n\n                if ( _checked && ( _qty > 0 ) && ( _id > 0 ) ) {\n                    items.push( _id + '/' + _price + '/' + _qty );\n                }\n            } );\n\n            if ( items.length > 0 ) {\n                $ids.val( items.join( ',' ) );\n            } else {\n                $ids.val( '' );\n            }\n        },\n        updateCount: function ( $wrap ) {\n            var $products = $wrap.find( '.gg_woo_bt-products' );\n            var $btn = $wrap.find( '.single_add_to_cart_button' );\n            var qty = 0;\n            var num = 1;\n\n            $products.find( '.gg_woo_bt-product-together' ).each( function () {\n                var $el = $( this );\n                var _checked = $el.find( '.gg_woo_bt-checkbox' ).prop( 'checked' );\n                var _id = parseInt( $el.attr( 'data-id' ) );\n                var _qty = parseFloat( $el.attr( 'data-qty' ) );\n\n                if ( _checked && ( _qty > 0 ) && ( _id > 0 ) ) {\n                    qty += _qty;\n                    num++;\n                }\n            } );\n\n            if ( $btn.closest( 'form.cart' ).find( 'input.qty' ).length ) {\n                qty += parseFloat(\n                    $btn.closest( 'form.cart' ).find( 'input.qty' ).val() );\n            }\n\n            if ( num > 1 ) {\n                if ( gg_woo_bt_params.counter === 'individual' ) {\n                    $btn.text( gg_woo_bt_params.text.add_to_cart + ' (' + num + ')' );\n                } else {\n                    $btn.text( gg_woo_bt_params.text.add_to_cart + ' (' + qty + ')' );\n                }\n            } else {\n                $btn.text( gg_woo_bt_params.text.add_to_cart );\n            }\n\n            $( document.body ).trigger( 'updateCount', [ num, qty ] );\n        },\n        priceHtml: function ( regular_price, sale_price ) {\n            var price_html = '';\n\n            if ( sale_price < regular_price ) {\n                price_html = '<del>' + GG_Woo_BT.formatPrice( regular_price ) +\n                    '</del> <ins>' +\n                    GG_Woo_BT.formatPrice( sale_price ) + '</ins>';\n            } else {\n                price_html = GG_Woo_BT.formatPrice( regular_price );\n            }\n\n            return price_html;\n        },\n        formatPrice: function ( total ) {\n            var total_html = '<span class=\"woocommerce-Price-amount amount\">';\n            var total_formatted = GG_Woo_BT.formatMoney( total, gg_woo_bt_params.price_decimals,\n                '', gg_woo_bt_params.price_thousand_separator,\n                gg_woo_bt_params.price_decimal_separator );\n\n            switch ( gg_woo_bt_params.price_format ) {\n                case '%1$s%2$s':\n                    total_html += '<span class=\"woocommerce-Price-currencySymbol\">' +\n                        gg_woo_bt_params.currency_symbol + '</span>' + total_formatted;\n                    break;\n                case '%1$s %2$s':\n                    total_html += '<span class=\"woocommerce-Price-currencySymbol\">' +\n                        gg_woo_bt_params.currency_symbol + '</span> ' + total_formatted;\n                    break;\n                case '%2$s%1$s':\n                    total_html += total_formatted +\n                        '<span class=\"woocommerce-Price-currencySymbol\">' +\n                        gg_woo_bt_params.currency_symbol + '</span>';\n                    break;\n                case '%2$s %1$s':\n                    total_html += total_formatted +\n                        ' <span class=\"woocommerce-Price-currencySymbol\">' +\n                        gg_woo_bt_params.currency_symbol + '</span>';\n                    break;\n                default:\n                    total_html += '<span class=\"woocommerce-Price-currencySymbol\">' +\n                        gg_woo_bt_params.currency_symbol + '</span> ' + total_formatted;\n            }\n\n            total_html += '</span>';\n\n            return total_html;\n        },\n        formatMoney: function ( number, places, symbol, thousand, decimal ) {\n            number = number || 0;\n            places = !isNaN( places = Math.abs( places ) ) ? places : 2;\n            symbol = symbol !== undefined ? symbol : '$';\n            thousand = thousand !== undefined ? thousand : ',';\n            decimal = decimal !== undefined ? decimal : '.';\n\n            var negative = number < 0 ? '-' : '',\n                i = parseInt( number = Math.abs( +number || 0 ).toFixed( places ), 10 ) + '',\n                j = 0;\n\n            if ( i.length > 3 ) {\n                j = i.length % 3;\n            }\n\n            return symbol + negative + ( j ? i.substr( 0, j ) + thousand : '' ) +\n                i.substr( j ).replace( /(\\d{3})(?=\\d)/g, '$1' + thousand ) + (\n                    places ? decimal + Math.abs( number - i ).toFixed( places ).slice( 2 ) : ''\n                );\n        }\n    };\n\n    $( GG_Woo_BT.init );\n} )( jQuery );\n"],"names":["$","GG_Woo_BT","init","run","access","changeQty","hookFoundVariation","hookResetData","document","ready","$wraper","length","each","prepareData","on","e","hasClass","preventDefault","$wrap","closest","value","val","attr","find","trigger","$el","$product","$checkbox","parseFloat","prop","min_val","max_val","wrap_id","undefined","parseInt","container","getContainer","$container","isReady","calcPrice","saveIds","gg_woo_bt_params","counter","updateCount","t","$products","new_price","isNaN","hide","html","priceHtml","show","text","remove","id","$wrap_el","$notice","$ids","$btn","is_selection","selection_name","optional","position","insertAfter","removeClass","is_checked","val_id","addClass","variation_notice","replace","slideDown","slideUp","qty","sync_qty","_qty","$product_this","$total","count","total","total_html","discount","ori_price","ori_price_suffix","ori_qty","total_ori","main_price_selector","show_price","fix","Math","pow","Number","price_decimals","_checked","_id","_price","_price_suffix","origin_price","regular_price","origin_total","_total","round","formatPrice","additional_price","recal_price","items","push","join","num","add_to_cart","body","sale_price","price_html","total_formatted","formatMoney","price_thousand_separator","price_decimal_separator","price_format","currency_symbol","number","places","symbol","thousand","decimal","abs","negative","i","toFixed","j","substr","slice","jQuery"],"mappings":";;;IAAA,CAAE,UAAWA,CAAX,EAAe;IACb,MAAIC,SAAS,GAAG;IACZC,IAAAA,IAAI,EAAE,gBAAY;IACdD,MAAAA,SAAS,CAACE,GAAV;IACAF,MAAAA,SAAS,CAACG,MAAV;IACAH,MAAAA,SAAS,CAACI,SAAV;IACAJ,MAAAA,SAAS,CAACK,kBAAV;IACAL,MAAAA,SAAS,CAACM,aAAV;IACH,KAPW;IAQZJ,IAAAA,GAAG,EAAE,eAAY;IACbH,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcC,KAAd,CAAqB,UAAWT,CAAX,EAAe;IAChC,YAAIU,OAAO,GAAGV,CAAC,CAAE,iBAAF,CAAf;;IACA,YAAK,CAACU,OAAO,CAACC,MAAd,EAAuB;IACnB;IACH;;IAEDD,QAAAA,OAAO,CAACE,IAAR,CAAc,YAAY;IACtBX,UAAAA,SAAS,CAACY,WAAV,CAAuBb,CAAC,CAAE,IAAF,CAAxB;IACH,SAFD;IAGH,OATD;IAUH,KAnBW;IAoBZI,IAAAA,MAAM,EAAE,kBAAY;IAChBJ,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcM,EAAd,CAAkB,aAAlB,EAAiC,4BAAjC,EAA+D,UAAWC,CAAX,EAAe;IAC1E,YAAKf,CAAC,CAAE,IAAF,CAAD,CAAUgB,QAAV,CAAoB,oBAApB,CAAL,EAAkD;IAC9CD,UAAAA,CAAC,CAACE,cAAF;IACH;IACJ,OAJD;IAMAjB,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcM,EAAd,CAAkB,QAAlB,EAA4B,qBAA5B,EAAmD,YAAY;IAC3D,YAAII,KAAK,GAAGlB,CAAC,CAAE,IAAF,CAAD,CAAUmB,OAAV,CAAmB,iBAAnB,CAAZ;IACAlB,QAAAA,SAAS,CAACY,WAAV,CAAuBK,KAAvB;IACH,OAHD;IAKAlB,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcM,EAAd,CAAkB,sBAAlB,EAA0C,qBAA1C,EAAiE,YAAY;IACzE,YAAIM,KAAK,GAAGpB,CAAC,CAAE,IAAF,CAAD,CAAUqB,GAAV,EAAZ;IAEArB,QAAAA,CAAC,CAAE,IAAF,CAAD,CAAUmB,OAAV,CAAmB,yBAAnB,EAA+CG,IAA/C,CAAqD,UAArD,EAAiEF,KAAjE;IACApB,QAAAA,CAAC,CAAE,IAAF,CAAD,CAAUmB,OAAV,CAAmB,UAAnB,EAAgCI,IAAhC,CAAsC,0BAAtC,EAAmEF,GAAnE,CAAwED,KAAxE,EAAgFI,OAAhF,CAAyF,QAAzF;IACH,OALD;IAOAxB,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcM,EAAd,CAAkB,sBAAlB,EAA0C,gBAA1C,EAA4D,YAAY;IACpE,YAAIW,GAAG,GAAGzB,CAAC,CAAE,IAAF,CAAX;IACA,YAAIU,OAAO,GAAGe,GAAG,CAACN,OAAJ,CAAa,iBAAb,CAAd;IACA,YAAIO,QAAQ,GAAGD,GAAG,CAACN,OAAJ,CAAa,oBAAb,CAAf;IACA,YAAIQ,SAAS,GAAGD,QAAQ,CAACH,IAAT,CAAe,qBAAf,CAAhB;IACA,YAAIH,KAAK,GAAGQ,UAAU,CAAEH,GAAG,CAACJ,GAAJ,EAAF,CAAtB;;IAEA,YAAKM,SAAS,CAACE,IAAV,CAAgB,SAAhB,CAAL,EAAmC;IAC/B,cAAIC,OAAO,GAAGF,UAAU,CAAEH,GAAG,CAACH,IAAJ,CAAU,KAAV,CAAF,CAAxB;IACA,cAAIS,OAAO,GAAGH,UAAU,CAAEH,GAAG,CAACH,IAAJ,CAAU,KAAV,CAAF,CAAxB;;IAEA,cAAKF,KAAK,GAAGU,OAAb,EAAuB;IACnBL,YAAAA,GAAG,CAACJ,GAAJ,CAASS,OAAT;IACH;;IAED,cAAKV,KAAK,GAAGW,OAAb,EAAuB;IACnBN,YAAAA,GAAG,CAACJ,GAAJ,CAASU,OAAT;IACH;;IAEDL,UAAAA,QAAQ,CAACJ,IAAT,CAAe,UAAf,EAA2BG,GAAG,CAACJ,GAAJ,EAA3B;IAEApB,UAAAA,SAAS,CAACY,WAAV,CAAuBH,OAAvB;IACH;IACJ,OAvBD;IAwBH,KA/DW;IAgEZG,IAAAA,WAAW,EAAE,qBAAWK,KAAX,EAAmB;IAC5B,UAAIc,OAAO,GAAGd,KAAK,CAACI,IAAN,CAAY,SAAZ,CAAd;;IAEA,UAAKU,OAAO,KAAKC,SAAZ,IAAyBC,QAAQ,CAAEF,OAAF,CAAR,GAAsB,CAApD,EAAwD;IACpD,YAAIG,SAAS,GAAGlC,SAAS,CAACmC,YAAV,CAAwBJ,OAAxB,CAAhB;IACA,YAAIK,UAAU,GAAGnB,KAAK,CAACC,OAAN,CAAegB,SAAf,CAAjB;IAEAlC,QAAAA,SAAS,CAACqC,OAAV,CAAmBD,UAAnB;IACApC,QAAAA,SAAS,CAACsC,SAAV,CAAqBF,UAArB;IACApC,QAAAA,SAAS,CAACuC,OAAV,CAAmBH,UAAnB;;IAEA,YAAKI,gBAAgB,CAACC,OAAjB,KAA6B,MAAlC,EAA2C;IACvCzC,UAAAA,SAAS,CAAC0C,WAAV,CAAuBN,UAAvB;IACH;IACJ;IACJ,KA/EW;IAgFZ/B,IAAAA,kBAAkB,EAAE,8BAAY;IAC5BN,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcM,EAAd,CAAkB,iBAAlB,EAAqC,UAAWC,CAAX,EAAc6B,CAAd,EAAkB;IACnD,YAAI1B,KAAK,GAAGlB,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,iBAA5B,CAAZ;IACA,YAAI0B,SAAS,GAAG7C,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,qBAA5B,CAAhB;IACA,YAAIO,QAAQ,GAAG1B,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,oBAA5B,CAAf;;IAEA,YAAKO,QAAQ,CAACf,MAAd,EAAuB;IACnB,cAAImC,SAAS,GAAGpB,QAAQ,CAACJ,IAAT,CAAe,gBAAf,CAAhB;;IAEA,cAAKyB,KAAK,CAAED,SAAF,CAAV,EAA0B;IACtBA,YAAAA,SAAS,GAAGF,CAAC,CAAE,eAAF,CAAD,GAAuBhB,UAAU,CAAEkB,SAAF,CAAjC,GAAiD,GAA7D;IACH;;IAEDpB,UAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EAAwCyB,IAAxC;IACAtB,UAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EACS0B,IADT,CACehD,SAAS,CAACiD,SAAV,CAAqBN,CAAC,CAAE,eAAF,CAAtB,EAA2CE,SAA3C,CADf,EAESK,IAFT;;IAIA,cAAKP,CAAC,CAAE,gBAAF,CAAD,IAAyBA,CAAC,CAAE,aAAF,CAA/B,EAAmD;IAC/ClB,YAAAA,QAAQ,CAACJ,IAAT,CAAe,SAAf,EAA0BsB,CAAC,CAAE,cAAF,CAA3B;IACAlB,YAAAA,QAAQ,CAACJ,IAAT,CAAe,YAAf,EAA6BsB,CAAC,CAAE,eAAF,CAA9B;IACH,WAHD,MAGO;IACHlB,YAAAA,QAAQ,CAACJ,IAAT,CAAe,SAAf,EAA0B,CAA1B;IACH;;IAED,cAAKsB,CAAC,CAAE,mBAAF,CAAD,IAA4BA,CAAC,CAAE,mBAAF,CAAD,KAA6B,EAA9D,EAAmE;IAC/DlB,YAAAA,QAAQ,CAACH,IAAT,CAAe,yBAAf,EAA2C0B,IAA3C,CAAiDL,CAAC,CAAE,mBAAF,CAAlD,EAA4EO,IAA5E;IACH,WAFD,MAEO;IACHzB,YAAAA,QAAQ,CAACH,IAAT,CAAe,yBAAf,EAA2C0B,IAA3C,CAAiD,EAAjD,EAAsDD,IAAtD;IACH;;IAED,cAAKJ,CAAC,CAAE,OAAF,CAAD,CAAc,KAAd,KAAyBA,CAAC,CAAE,OAAF,CAAD,CAAc,QAAd,CAA9B,EAAyD;IACrDlB,YAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EAAwCyB,IAAxC;IACAtB,YAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EACS0B,IADT,CACe,eAAeL,CAAC,CAAE,OAAF,CAAD,CAAc,KAAd,CAAf,GAAuC,YAAvC,GACHA,CAAC,CAAE,OAAF,CAAD,CAAc,QAAd,CADG,GACwB,KAFvC,EAGSO,IAHT;IAIH;;IAEDnD,UAAAA,CAAC,CAAE,oBAAF,CAAD,CAA0BoD,IAA1B,CAAgCP,SAAS,CAACvB,IAAV,CAAgB,kBAAhB,CAAhC;IAEAtB,UAAAA,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,kBAA5B,EAAiDK,OAAjD,CAA0D,aAA1D;IACH,SApCD,MAoCO;IACHN,UAAAA,KAAK,GAAGlB,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,UAA5B,EAAyCI,IAAzC,CAA+C,iBAA/C,CAAR;IACAsB,UAAAA,SAAS,GAAG7C,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,UAA5B,EAAyCI,IAAzC,CAA+C,qBAA/C,CAAZ;IACAsB,UAAAA,SAAS,CAACvB,IAAV,CAAgB,iBAAhB,EAAmCsB,CAAC,CAAE,cAAF,CAApC;IACAC,UAAAA,SAAS,CAACvB,IAAV,CAAgB,kBAAhB,EAAoCsB,CAAC,CAAE,KAAF,CAArC;IACAC,UAAAA,SAAS,CAACvB,IAAV,CAAgB,oBAAhB,EAAsCsB,CAAC,CAAE,eAAF,CAAvC;IACH;;IAED3C,QAAAA,SAAS,CAACY,WAAV,CAAuBK,KAAvB;IACH,OAlDD;IAmDH,KApIW;IAqIZX,IAAAA,aAAa,EAAE,yBAAY;IACvBP,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcM,EAAd,CAAkB,YAAlB,EAAgC,UAAWC,CAAX,EAAe;IAC3C,YAAIG,KAAK,GAAGlB,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,iBAA5B,CAAZ;IACA,YAAI0B,SAAS,GAAG7C,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,qBAA5B,CAAhB;IACA,YAAIO,QAAQ,GAAG1B,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,oBAA5B,CAAf;;IAEA,YAAKO,QAAQ,CAACf,MAAd,EAAuB;IACnBe,UAAAA,QAAQ,CAACJ,IAAT,CAAe,SAAf,EAA0B,CAA1B;IACAtB,UAAAA,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,kBAA5B,EAAiDI,IAAjD,CAAuD,SAAvD,EAAmE8B,MAAnE;IACArD,UAAAA,CAAC,CAAE,oBAAF,CAAD,CAA0BoD,IAA1B,CAAgCP,SAAS,CAACvB,IAAV,CAAgB,kBAAhB,CAAhC;IACAI,UAAAA,QAAQ,CAACH,IAAT,CAAe,yBAAf,EAA2C0B,IAA3C,CAAiD,EAAjD,EAAsDD,IAAtD;IACAtB,UAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EAAwCyB,IAAxC;IACAtB,UAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EAAwC4B,IAAxC;IACAzB,UAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EAAwCyB,IAAxC;IACAtB,UAAAA,QAAQ,CAACH,IAAT,CAAe,sBAAf,EAAwC4B,IAAxC;IACH,SATD,MASO;IACHjC,UAAAA,KAAK,GAAGlB,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,UAA5B,EAAyCI,IAAzC,CAA+C,iBAA/C,CAAR;IACAsB,UAAAA,SAAS,GAAG7C,CAAC,CAAEe,CAAC,CAAE,QAAF,CAAH,CAAD,CAAmBI,OAAnB,CAA4B,UAA5B,EAAyCI,IAAzC,CAA+C,qBAA/C,CAAZ;IACAsB,UAAAA,SAAS,CAACvB,IAAV,CAAgB,iBAAhB,EAAmC,CAAnC;IACAuB,UAAAA,SAAS,CAACvB,IAAV,CAAgB,oBAAhB,EAAsC,CAAtC;IACAuB,UAAAA,SAAS,CAACvB,IAAV,CAAgB,kBAAhB,EAAoCuB,SAAS,CAACvB,IAAV,CAAgB,oBAAhB,CAApC;IACH;;IAEDrB,QAAAA,SAAS,CAACY,WAAV,CAAuBK,KAAvB;IACH,OAvBD;IAwBH,KA9JW;IA+JZkB,IAAAA,YAAY,EAAE,sBAAWkB,EAAX,EAAgB;IAC1B,UAAIC,QAAQ,GAAGvD,CAAC,CAAE,qBAAqBsD,EAAvB,CAAhB;;IACA,UAAKC,QAAQ,CAACpC,OAAT,CAAkB,cAAcmC,EAAhC,EAAqC3C,MAA1C,EAAmD;IAC/C,eAAO,cAAc2C,EAArB;IACH;;IAED,UAAKC,QAAQ,CAACpC,OAAT,CAAkB,mBAAmBmC,EAArC,EAA0C3C,MAA/C,EAAwD;IACpD,eAAO,mBAAmB2C,EAA1B;IACH;;IAED,UAAKC,QAAQ,CAACpC,OAAT,CAAkB,aAAlB,EAAkCR,MAAvC,EAAgD;IAC5C,eAAO,aAAP;IACH;;IAED,aAAO,qBAAP;IACH,KA9KW;IA+KZ2B,IAAAA,OAAO,EAAE,iBAAWpB,KAAX,EAAmB;IACxB,UAAI2B,SAAS,GAAG3B,KAAK,CAACK,IAAN,CAAY,qBAAZ,CAAhB;IACA,UAAIiC,OAAO,GAAGtC,KAAK,CAACK,IAAN,CAAY,mBAAZ,CAAd;IACA,UAAIkC,IAAI,GAAGvC,KAAK,CAACK,IAAN,CAAY,gBAAZ,CAAX;IACA,UAAImC,IAAI,GAAGxC,KAAK,CAACK,IAAN,CAAY,4BAAZ,CAAX;IACA,UAAIoC,YAAY,GAAG,KAAnB;IACA,UAAIC,cAAc,GAAG,EAArB;IACA,UAAIC,QAAQ,GAAGhB,SAAS,CAACvB,IAAV,CAAgB,eAAhB,CAAf;;IAEA,UAAOuC,QAAQ,KAAK,IAAf,IAA2BhB,SAAS,CAACtB,IAAV,CAAgB,yBAAhB,EAA4CZ,MAA5C,GAAqD,CAArF,EAA2F;IACvFX,QAAAA,CAAC,CAAE,uBAAF,CAAD,CAA6BgD,IAA7B;IACAhD,QAAAA,CAAC,CAAE,0DAAF,CAAD,CAAgEgD,IAAhE;IACH;;IAED,UAAOP,gBAAgB,CAACqB,QAAjB,KAA8B,oBAAhC,IACCjB,SAAS,CAACvB,IAAV,CAAgB,mBAAhB,MAA0C,UAD3C,IAECuB,SAAS,CAACvB,IAAV,CAAgB,gBAAhB,MAAuC,IAF7C,EAEsD;IAClDuB,QAAAA,SAAS,CAAC1B,OAAV,CAAmB,iBAAnB,EAAuC4C,WAAvC,CAAoDN,IAApD;IACAZ,QAAAA,SAAS,CAACtB,IAAV,CAAgB,gBAAhB,EAAmCyC,WAAnC,CAAgD,KAAhD;IACH;;IAEDnB,MAAAA,SAAS,CAACtB,IAAV,CAAgB,6BAAhB,EAAgDX,IAAhD,CAAsD,YAAY;IAC9D,YAAIa,GAAG,GAAGzB,CAAC,CAAE,IAAF,CAAX;IACA,YAAIiE,UAAU,GAAGxC,GAAG,CAACF,IAAJ,CAAU,qBAAV,EAAkCM,IAAlC,CAAwC,SAAxC,CAAjB;IACA,YAAIqC,MAAM,GAAGhC,QAAQ,CAAET,GAAG,CAACH,IAAJ,CAAU,SAAV,CAAF,CAArB;;IAEA,YAAK,CAAC2C,UAAN,EAAmB;IACfxC,UAAAA,GAAG,CAAC0C,QAAJ,CAAc,qBAAd;;IAEA,cAAK,CAAC1C,GAAG,CAACT,QAAJ,CAAc,uBAAd,CAAN,EAAgD;IAC5CS,YAAAA,GAAG,CAACF,IAAJ,CAAU,kBAAV,EAA+ByB,IAA/B;IACH;IACJ,SAND,MAMO;IACHvB,UAAAA,GAAG,CAACuC,WAAJ,CAAiB,qBAAjB;;IACA,cAAK,CAACvC,GAAG,CAACT,QAAJ,CAAc,uBAAd,CAAN,EAAgD;IAC5CS,YAAAA,GAAG,CAACF,IAAJ,CAAU,kBAAV,EAA+B4B,IAA/B;IACH;IACJ;;IAED,YAAKc,UAAU,IAAMC,MAAM,IAAI,CAA/B,EAAqC;IACjCP,UAAAA,YAAY,GAAG,IAAf;;IAEA,cAAKC,cAAc,KAAK,EAAxB,EAA6B;IACzBA,YAAAA,cAAc,GAAGnC,GAAG,CAACH,IAAJ,CAAU,WAAV,CAAjB;IACH;IACJ;IACJ,OAzBD;;IA2BA,UAAKqC,YAAL,EAAoB;IAChBD,QAAAA,IAAI,CAACS,QAAL,CAAe,wCAAf;IACAX,QAAAA,OAAO,CAACP,IAAR,CACIR,gBAAgB,CAACW,IAAjB,CAAsBgB,gBAAtB,CAAuCC,OAAvC,CAAgD,IAAhD,EAAsD,aAAaT,cAAb,GAA8B,WAApF,CADJ,EAEQU,SAFR;IAGH,OALD,MAKO;IACHZ,QAAAA,IAAI,CAACM,WAAL,CAAkB,wCAAlB;IACAR,QAAAA,OAAO,CAACP,IAAR,CAAc,EAAd,EAAmBsB,OAAnB;IACH;IACJ,KAxOW;IAyOZlE,IAAAA,SAAS,EAAE,qBAAY;IACnBL,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcM,EAAd,CAAkB,QAAlB,EAA4B,gBAA5B,EAA8C,YAAY;IACtD,YAAIW,GAAG,GAAGzB,CAAC,CAAE,IAAF,CAAX;IACA,YAAIwE,GAAG,GAAG5C,UAAU,CAAEH,GAAG,CAACJ,GAAJ,EAAF,CAApB;;IAEA,YAAKI,GAAG,CAACT,QAAJ,CAAc,eAAd,CAAL,EAAuC;IACnC;IACH;;IAED,YAAK,CAACS,GAAG,CAACN,OAAJ,CAAa,WAAb,EAA2BI,IAA3B,CAAiC,gBAAjC,EAAoDZ,MAA1D,EAAmE;IAC/D;IACH;;IAED,YAAIqB,OAAO,GAAGP,GAAG,CAACN,OAAJ,CAAa,WAAb,EAA2BI,IAA3B,CAAiC,gBAAjC,EAAoDD,IAApD,CAA0D,SAA1D,CAAd;IACA,YAAIJ,KAAK,GAAGlB,CAAC,CAAE,qBAAqBgC,OAAvB,CAAb;IACA,YAAIa,SAAS,GAAG3B,KAAK,CAACK,IAAN,CAAY,qBAAZ,CAAhB;IACA,YAAIsC,QAAQ,GAAGhB,SAAS,CAACvB,IAAV,CAAgB,eAAhB,CAAf;IACA,YAAImD,QAAQ,GAAG5B,SAAS,CAACvB,IAAV,CAAgB,eAAhB,CAAf;IAEAuB,QAAAA,SAAS,CAACtB,IAAV,CAAgB,yBAAhB,EAA4CD,IAA5C,CAAkD,UAAlD,EAA8DkD,GAA9D;;IAEA,YAAOX,QAAQ,KAAK,IAAf,IAA2BY,QAAQ,KAAK,IAA7C,EAAsD;IAClD5B,UAAAA,SAAS,CAACtB,IAAV,CAAgB,6BAAhB,EAAgDX,IAAhD,CAAsD,YAAY;IAC9D,gBAAI8D,IAAI,GAAG9C,UAAU,CAAE5B,CAAC,CAAE,IAAF,CAAD,CAAUsB,IAAV,CAAgB,cAAhB,CAAF,CAAV,GAAiDkD,GAA5D;;IAEAxE,YAAAA,CAAC,CAAE,IAAF,CAAD,CAAUsB,IAAV,CAAgB,UAAhB,EAA4BoD,IAA5B;IACA1E,YAAAA,CAAC,CAAE,IAAF,CAAD,CAAUuB,IAAV,CAAgB,mCAAhB,EAAsD0B,IAAtD,CAA4DyB,IAA5D;IACH,WALD;IAMH;;IAEDzE,QAAAA,SAAS,CAACY,WAAV,CAAuBK,KAAvB;IACH,OA9BD;IA+BH,KAzQW;IA0QZqB,IAAAA,SAAS,EAAE,mBAAWrB,KAAX,EAAmB;IAC1B,UAAI2B,SAAS,GAAG3B,KAAK,CAACK,IAAN,CAAY,qBAAZ,CAAhB;IACA,UAAIoD,aAAa,GAAG9B,SAAS,CAACtB,IAAV,CAAgB,yBAAhB,CAApB;IACA,UAAIqD,MAAM,GAAG1D,KAAK,CAACK,IAAN,CAAY,kBAAZ,CAAb;IACA,UAAImC,IAAI,GAAGxC,KAAK,CAACK,IAAN,CAAY,4BAAZ,CAAX;IACA,UAAIsD,KAAK,GAAG,CAAZ;IAAA,UAAeC,KAAK,GAAG,CAAvB;IACA,UAAIC,UAAU,GAAG,EAAjB;IACA,UAAIC,QAAQ,GAAGpD,UAAU,CAAEiB,SAAS,CAACvB,IAAV,CAAgB,eAAhB,CAAF,CAAzB;IACA,UAAI2D,SAAS,GAAGrD,UAAU,CAAEiB,SAAS,CAACvB,IAAV,CAAgB,oBAAhB,CAAF,CAA1B;IACA,UAAI4D,gBAAgB,GAAGrC,SAAS,CAACvB,IAAV,CAAgB,2BAAhB,CAAvB;IACA,UAAI6D,OAAO,GAAGvD,UAAU,CAAE8B,IAAI,CAACvC,OAAL,CAAc,WAAd,EAA4BI,IAA5B,CAAkC,WAAlC,EAAgDF,GAAhD,EAAF,CAAxB;IACA,UAAI+D,SAAS,GAAGH,SAAS,GAAGE,OAA5B;IACA,UAAIE,mBAAmB,GAAG5C,gBAAgB,CAAC4C,mBAA3C;IACA,UAAIC,UAAU,GAAGzC,SAAS,CAACvB,IAAV,CAAgB,iBAAhB,CAAjB;IACA,UAAIiE,GAAG,GAAGC,IAAI,CAACC,GAAL,CAAU,EAAV,EAAcC,MAAM,CAAEjD,gBAAgB,CAACkD,cAAnB,CAAN,GAA4C,CAA1D,CAAV;IAEA9C,MAAAA,SAAS,CAACtB,IAAV,CAAgB,6BAAhB,EAAgDX,IAAhD,CAAsD,YAAY;IAC9D,YAAIa,GAAG,GAAGzB,CAAC,CAAE,IAAF,CAAX;;IACA,YAAI4F,QAAQ,GAAGnE,GAAG,CAACF,IAAJ,CAAU,qBAAV,EAAkCM,IAAlC,CAAwC,SAAxC,CAAf;;IACA,YAAIgE,GAAG,GAAG3D,QAAQ,CAAET,GAAG,CAACH,IAAJ,CAAU,SAAV,CAAF,CAAlB;;IACA,YAAIoD,IAAI,GAAG9C,UAAU,CAAEH,GAAG,CAACH,IAAJ,CAAU,UAAV,CAAF,CAArB;;IACA,YAAIwE,MAAM,GAAGrE,GAAG,CAACH,IAAJ,CAAU,gBAAV,CAAb;;IACA,YAAIyE,aAAa,GAAGtE,GAAG,CAACH,IAAJ,CAAU,mBAAV,CAApB;;IACA,YAAI0E,YAAY,GAAGvE,GAAG,CAACH,IAAJ,CAAU,YAAV,CAAnB;IACA,YAAI2E,aAAa,GAAGxE,GAAG,CAACH,IAAJ,CAAU,oBAAV,CAApB;IACA,YAAI4E,YAAY,GAAG,CAAnB;IAAA,YAAsBC,MAAM,GAAG,CAA/B;;IAEA,YAAOzB,IAAI,GAAG,CAAT,IAAkBmB,GAAG,GAAG,CAA7B,EAAmC;IAC/BK,UAAAA,YAAY,GAAGxB,IAAI,GAAGsB,YAAtB;;IAEA,cAAKjD,KAAK,CAAE+C,MAAF,CAAV,EAAuB;IACnB,gBAAKA,MAAM,IAAI,MAAf,EAAwB;IACpBI,cAAAA,YAAY,GAAGxB,IAAI,GAAGuB,aAAtB;IACAE,cAAAA,MAAM,GAAGzB,IAAI,GAAGsB,YAAhB;IACH,aAHD,MAGO;IACHG,cAAAA,MAAM,GAAGD,YAAY,GAAGtE,UAAU,CAAEkE,MAAF,CAAzB,GAAsC,GAA/C;IACH;IACJ,WAPD,MAOO;IACHK,YAAAA,MAAM,GAAGzB,IAAI,GAAGoB,MAAhB;IACH;;IAED,cAAKR,UAAU,KAAK,OAApB,EAA8B;IAC1B7D,YAAAA,GAAG,CAACF,IAAJ,CAAU,sBAAV,EAAmCyB,IAAnC;IACAvB,YAAAA,GAAG,CAACF,IAAJ,CAAU,sBAAV,EACI0B,IADJ,CACUhD,SAAS,CAACiD,SAAV,CAAqBgD,YAArB,EAAmCC,MAAnC,IAA8CJ,aADxD,EAEI5C,IAFJ;IAGH;;IAED,cAAKyC,QAAL,EAAgB;IACZf,YAAAA,KAAK;IACLC,YAAAA,KAAK,IAAIqB,MAAT;IACH;IACJ;IACJ,OArCD;IAuCArB,MAAAA,KAAK,GAAGU,IAAI,CAACY,KAAL,CAAYtB,KAAK,GAAGS,GAApB,IAA4BA,GAApC;;IAEA,UAAKZ,aAAa,CAAChE,MAAnB,EAA4B;IACxB,YAAI+D,IAAI,GAAG9C,UAAU,CAAE+C,aAAa,CAACrD,IAAd,CAAoB,UAApB,CAAF,CAArB;;IACA,YAAIyE,aAAa,GAAGpB,aAAa,CAACrD,IAAd,CAAoB,mBAApB,CAApB;;IAEA,YAAKwD,KAAK,GAAG,CAAb,EAAiB;IACb,cAAIgB,MAAM,GAAGnB,aAAa,CAACrD,IAAd,CAAoB,gBAApB,CAAb;;IACA,cAAI0E,YAAY,GAAGrB,aAAa,CAACrD,IAAd,CAAoB,YAApB,CAAnB;;IACA,cAAI4E,YAAY,GAAGxB,IAAI,GAAGsB,YAA1B;IAAA,cACIG,MAAM,GAAGzB,IAAI,GAAGoB,MADpB;;IAGAnB,UAAAA,aAAa,CAACpD,IAAd,CAAoB,sBAApB,EAA6CyB,IAA7C;IACA2B,UAAAA,aAAa,CAACpD,IAAd,CAAoB,sBAApB,EACc0B,IADd,CACoBhD,SAAS,CAACiD,SAAV,CAAqBgD,YAArB,EAAmCC,MAAnC,IAA8CJ,aADlE,EAEc5C,IAFd;IAGH,SAVD,MAUO;IACH,cAAI2C,MAAM,GAAGnB,aAAa,CAACrD,IAAd,CAAoB,YAApB,CAAb;;IACA,cAAI2E,aAAa,GAAGtB,aAAa,CAACrD,IAAd,CAAoB,oBAApB,CAApB;;IACA,cAAI4E,YAAY,GAAGxB,IAAI,GAAGuB,aAA1B;IAAA,cACIE,MAAM,GAAGzB,IAAI,GAAGoB,MADpB;;IAGAnB,UAAAA,aAAa,CAACpD,IAAd,CAAoB,sBAApB,EAA6CyB,IAA7C;IACA2B,UAAAA,aAAa,CAACpD,IAAd,CAAoB,sBAApB,EACc0B,IADd,CACoBhD,SAAS,CAACiD,SAAV,CAAqBgD,YAArB,EAAmCC,MAAnC,IAA8CJ,aADlE,EAEc5C,IAFd;IAGH;IACJ;;IAED,UAAK0B,KAAK,GAAG,CAAb,EAAiB;IACbE,QAAAA,UAAU,GAAG9E,SAAS,CAACoG,WAAV,CAAuBvB,KAAvB,CAAb;IACAF,QAAAA,MAAM,CAAC3B,IAAP,CACIR,gBAAgB,CAACW,IAAjB,CAAsBkD,gBAAtB,GAAyC,GAAzC,GAA+CvB,UAA/C,GAA4DG,gBADhE,EACmFZ,SADnF;;IAGA,YAAKvB,KAAK,CAAEiC,QAAF,CAAV,EAAyB;IACrBA,UAAAA,QAAQ,GAAG,CAAX;IACH;;IAEDI,QAAAA,SAAS,GAAGA,SAAS,IAAK,MAAMJ,QAAX,CAAT,GAAiC,GAAjC,GAAuCF,KAAnD;IACH,OAVD,MAUO;IACHF,QAAAA,MAAM,CAAC3B,IAAP,CAAa,EAAb,EAAkBsB,OAAlB;IACH;;IAED,UAAK9B,gBAAgB,CAAC8D,WAAjB,KAAiC,KAAtC,EAA8C;IAC1C,YAAKrE,QAAQ,CAAEW,SAAS,CAACvB,IAAV,CAAgB,iBAAhB,CAAF,CAAR,GAAkD,CAAvD,EAA2D;IACvDtB,UAAAA,CAAC,CAAEqF,mBAAF,CAAD,CAAyBpC,IAAzB,CAA+BhD,SAAS,CAACoG,WAAV,CAAuBjB,SAAvB,IAAqCF,gBAApE;IACH,SAFD,MAEO;IACHlF,UAAAA,CAAC,CAAEqF,mBAAF,CAAD,CAAyBpC,IAAzB,CAA+BJ,SAAS,CAACvB,IAAV,CAAgB,yBAAhB,CAA/B;IACH;IACJ;;IAEDtB,MAAAA,CAAC,CAAEQ,QAAF,CAAD,CAAcgB,OAAd,CAAuB,WAAvB,EAAoC,CAAEsD,KAAF,EAASC,UAAT,CAApC;IAEA7D,MAAAA,KAAK,CAACK,IAAN,CAAY,iBAAZ,EAAgCD,IAAhC,CAAsC,YAAtC,EAAoDwD,KAApD;IACH,KAvXW;IAwXZtC,IAAAA,OAAO,EAAE,iBAAWtB,KAAX,EAAmB;IACxB,UAAI2B,SAAS,GAAG3B,KAAK,CAACK,IAAN,CAAY,qBAAZ,CAAhB;IACA,UAAIkC,IAAI,GAAGvC,KAAK,CAACK,IAAN,CAAY,gBAAZ,CAAX;IACA,UAAIiF,KAAK,GAAG,EAAZ;IAEA3D,MAAAA,SAAS,CAACtB,IAAV,CAAgB,6BAAhB,EAAgDX,IAAhD,CAAsD,YAAY;IAC9D,YAAIa,GAAG,GAAGzB,CAAC,CAAE,IAAF,CAAX;;IACA,YAAI4F,QAAQ,GAAGnE,GAAG,CAACF,IAAJ,CAAU,qBAAV,EAAkCM,IAAlC,CAAwC,SAAxC,CAAf;;IACA,YAAIgE,GAAG,GAAG3D,QAAQ,CAAET,GAAG,CAACH,IAAJ,CAAU,SAAV,CAAF,CAAlB;;IACA,YAAIoD,IAAI,GAAG9C,UAAU,CAAEH,GAAG,CAACH,IAAJ,CAAU,UAAV,CAAF,CAArB;;IACA,YAAIwE,MAAM,GAAGrE,GAAG,CAACH,IAAJ,CAAU,gBAAV,CAAb;;IAEA,YAAKsE,QAAQ,IAAMlB,IAAI,GAAG,CAArB,IAA8BmB,GAAG,GAAG,CAAzC,EAA+C;IAC3CW,UAAAA,KAAK,CAACC,IAAN,CAAYZ,GAAG,GAAG,GAAN,GAAYC,MAAZ,GAAqB,GAArB,GAA2BpB,IAAvC;IACH;IACJ,OAVD;;IAYA,UAAK8B,KAAK,CAAC7F,MAAN,GAAe,CAApB,EAAwB;IACpB8C,QAAAA,IAAI,CAACpC,GAAL,CAAUmF,KAAK,CAACE,IAAN,CAAY,GAAZ,CAAV;IACH,OAFD,MAEO;IACHjD,QAAAA,IAAI,CAACpC,GAAL,CAAU,EAAV;IACH;IACJ,KA9YW;IA+YZsB,IAAAA,WAAW,EAAE,qBAAWzB,KAAX,EAAmB;IAC5B,UAAI2B,SAAS,GAAG3B,KAAK,CAACK,IAAN,CAAY,qBAAZ,CAAhB;IACA,UAAImC,IAAI,GAAGxC,KAAK,CAACK,IAAN,CAAY,4BAAZ,CAAX;IACA,UAAIiD,GAAG,GAAG,CAAV;IACA,UAAImC,GAAG,GAAG,CAAV;IAEA9D,MAAAA,SAAS,CAACtB,IAAV,CAAgB,6BAAhB,EAAgDX,IAAhD,CAAsD,YAAY;IAC9D,YAAIa,GAAG,GAAGzB,CAAC,CAAE,IAAF,CAAX;;IACA,YAAI4F,QAAQ,GAAGnE,GAAG,CAACF,IAAJ,CAAU,qBAAV,EAAkCM,IAAlC,CAAwC,SAAxC,CAAf;;IACA,YAAIgE,GAAG,GAAG3D,QAAQ,CAAET,GAAG,CAACH,IAAJ,CAAU,SAAV,CAAF,CAAlB;;IACA,YAAIoD,IAAI,GAAG9C,UAAU,CAAEH,GAAG,CAACH,IAAJ,CAAU,UAAV,CAAF,CAArB;;IAEA,YAAKsE,QAAQ,IAAMlB,IAAI,GAAG,CAArB,IAA8BmB,GAAG,GAAG,CAAzC,EAA+C;IAC3CrB,UAAAA,GAAG,IAAIE,IAAP;IACAiC,UAAAA,GAAG;IACN;IACJ,OAVD;;IAYA,UAAKjD,IAAI,CAACvC,OAAL,CAAc,WAAd,EAA4BI,IAA5B,CAAkC,WAAlC,EAAgDZ,MAArD,EAA8D;IAC1D6D,QAAAA,GAAG,IAAI5C,UAAU,CACb8B,IAAI,CAACvC,OAAL,CAAc,WAAd,EAA4BI,IAA5B,CAAkC,WAAlC,EAAgDF,GAAhD,EADa,CAAjB;IAEH;;IAED,UAAKsF,GAAG,GAAG,CAAX,EAAe;IACX,YAAKlE,gBAAgB,CAACC,OAAjB,KAA6B,YAAlC,EAAiD;IAC7CgB,UAAAA,IAAI,CAACN,IAAL,CAAWX,gBAAgB,CAACW,IAAjB,CAAsBwD,WAAtB,GAAoC,IAApC,GAA2CD,GAA3C,GAAiD,GAA5D;IACH,SAFD,MAEO;IACHjD,UAAAA,IAAI,CAACN,IAAL,CAAWX,gBAAgB,CAACW,IAAjB,CAAsBwD,WAAtB,GAAoC,IAApC,GAA2CpC,GAA3C,GAAiD,GAA5D;IACH;IACJ,OAND,MAMO;IACHd,QAAAA,IAAI,CAACN,IAAL,CAAWX,gBAAgB,CAACW,IAAjB,CAAsBwD,WAAjC;IACH;;IAED5G,MAAAA,CAAC,CAAEQ,QAAQ,CAACqG,IAAX,CAAD,CAAmBrF,OAAnB,CAA4B,aAA5B,EAA2C,CAAEmF,GAAF,EAAOnC,GAAP,CAA3C;IACH,KAjbW;IAkbZtB,IAAAA,SAAS,EAAE,mBAAW+C,aAAX,EAA0Ba,UAA1B,EAAuC;IAC9C,UAAIC,UAAU,GAAG,EAAjB;;IAEA,UAAKD,UAAU,GAAGb,aAAlB,EAAkC;IAC9Bc,QAAAA,UAAU,GAAG,UAAU9G,SAAS,CAACoG,WAAV,CAAuBJ,aAAvB,CAAV,GACT,cADS,GAEThG,SAAS,CAACoG,WAAV,CAAuBS,UAAvB,CAFS,GAE6B,QAF1C;IAGH,OAJD,MAIO;IACHC,QAAAA,UAAU,GAAG9G,SAAS,CAACoG,WAAV,CAAuBJ,aAAvB,CAAb;IACH;;IAED,aAAOc,UAAP;IACH,KA9bW;IA+bZV,IAAAA,WAAW,EAAE,qBAAWvB,KAAX,EAAmB;IAC5B,UAAIC,UAAU,GAAG,gDAAjB;IACA,UAAIiC,eAAe,GAAG/G,SAAS,CAACgH,WAAV,CAAuBnC,KAAvB,EAA8BrC,gBAAgB,CAACkD,cAA/C,EAClB,EADkB,EACdlD,gBAAgB,CAACyE,wBADH,EAElBzE,gBAAgB,CAAC0E,uBAFC,CAAtB;;IAIA,cAAS1E,gBAAgB,CAAC2E,YAA1B;IACI,aAAK,UAAL;IACIrC,UAAAA,UAAU,IAAI,oDACVtC,gBAAgB,CAAC4E,eADP,GACyB,SADzB,GACqCL,eADnD;IAEA;;IACJ,aAAK,WAAL;IACIjC,UAAAA,UAAU,IAAI,oDACVtC,gBAAgB,CAAC4E,eADP,GACyB,UADzB,GACsCL,eADpD;IAEA;;IACJ,aAAK,UAAL;IACIjC,UAAAA,UAAU,IAAIiC,eAAe,GACzB,iDADU,GAEVvE,gBAAgB,CAAC4E,eAFP,GAEyB,SAFvC;IAGA;;IACJ,aAAK,WAAL;IACItC,UAAAA,UAAU,IAAIiC,eAAe,GACzB,kDADU,GAEVvE,gBAAgB,CAAC4E,eAFP,GAEyB,SAFvC;IAGA;;IACJ;IACItC,UAAAA,UAAU,IAAI,oDACVtC,gBAAgB,CAAC4E,eADP,GACyB,UADzB,GACsCL,eADpD;IApBR;;IAwBAjC,MAAAA,UAAU,IAAI,SAAd;IAEA,aAAOA,UAAP;IACH,KAheW;IAieZkC,IAAAA,WAAW,EAAE,qBAAWK,MAAX,EAAmBC,MAAnB,EAA2BC,MAA3B,EAAmCC,QAAnC,EAA6CC,OAA7C,EAAuD;IAChEJ,MAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;IACAC,MAAAA,MAAM,GAAG,CAACxE,KAAK,CAAEwE,MAAM,GAAG/B,IAAI,CAACmC,GAAL,CAAUJ,MAAV,CAAX,CAAN,GAAwCA,MAAxC,GAAiD,CAA1D;IACAC,MAAAA,MAAM,GAAGA,MAAM,KAAKvF,SAAX,GAAuBuF,MAAvB,GAAgC,GAAzC;IACAC,MAAAA,QAAQ,GAAGA,QAAQ,KAAKxF,SAAb,GAAyBwF,QAAzB,GAAoC,GAA/C;IACAC,MAAAA,OAAO,GAAGA,OAAO,KAAKzF,SAAZ,GAAwByF,OAAxB,GAAkC,GAA5C;IAEA,UAAIE,QAAQ,GAAGN,MAAM,GAAG,CAAT,GAAa,GAAb,GAAmB,EAAlC;IAAA,UACIO,CAAC,GAAG3F,QAAQ,CAAEoF,MAAM,GAAG9B,IAAI,CAACmC,GAAL,CAAU,CAACL,MAAD,IAAW,CAArB,EAAyBQ,OAAzB,CAAkCP,MAAlC,CAAX,EAAuD,EAAvD,CAAR,GAAsE,EAD9E;IAAA,UAEIQ,CAAC,GAAG,CAFR;;IAIA,UAAKF,CAAC,CAAClH,MAAF,GAAW,CAAhB,EAAoB;IAChBoH,QAAAA,CAAC,GAAGF,CAAC,CAAClH,MAAF,GAAW,CAAf;IACH;;IAED,aAAO6G,MAAM,GAAGI,QAAT,IAAsBG,CAAC,GAAGF,CAAC,CAACG,MAAF,CAAU,CAAV,EAAaD,CAAb,IAAmBN,QAAtB,GAAiC,EAAxD,IACHI,CAAC,CAACG,MAAF,CAAUD,CAAV,EAAc1D,OAAd,CAAuB,gBAAvB,EAAyC,OAAOoD,QAAhD,CADG,IAECF,MAAM,GAAGG,OAAO,GAAGlC,IAAI,CAACmC,GAAL,CAAUL,MAAM,GAAGO,CAAnB,EAAuBC,OAAvB,CAAgCP,MAAhC,EAAyCU,KAAzC,CAAgD,CAAhD,CAAb,GAAmE,EAF1E,CAAP;IAIH;IApfW,GAAhB;IAufAjI,EAAAA,CAAC,CAAEC,SAAS,CAACC,IAAZ,CAAD;IACH,CAzfD,EAyfKgI,MAzfL;;;;"}